
nodes = """
# 实体类型
## 案例
### 介绍
1. 表示合规案例库中的一个具体案例，是合规知识图谱的核心实体，用于承载事实、行为、案例分析、启示等
2. 文本中的案例都要提取出来，请确保无遗漏，可通过“案例X”、markdown表格案例数据行等方式获取案例，如从“案例1:国企境外公司高管受贿案”获取“国企境外公司高管受贿案”
### 属性
- 案例名称：案例的正式标题，不包含编号、标号和非实体可拥有的符号，即不包含（案例一、序号5等）
- 案例编号：案例在案例库中的序号
- 合规领域：案例所属的合规领域章节，包括“反腐败反商业贿赂”、“反垄断反不正当竞争”、“经济制裁”、“反洗钱”、“安全环保”、“商业秘密”、“劳动用工”、“数据安全”、“国资监管及境外投资”等
- 案例类型：案例性质，如“真实案例”、“模拟案例”
- 发生时间：案件主要行为发生的时间或时间区间
- 发生国家或地区：案件行为发生的国家或地区
- 案例摘要：对案件事实的高度概括性描述

## 主体
### 介绍
表示参与或涉及合规案例的当事人或组织中的自然人主体。
### 属性
- 主体名称：涉案主体的姓名或匿名标识
- 主体类型：个人或组织成员
- 主体身份：主体在案例中的角色，如被告、嫌疑人
- 是否国家工作人员：是否依法认定为国家工作人员
- 所属组织：主体隶属或任职的组织

## 组织机构
### 介绍
表示案例中涉及的企业、机构或其他组织实体，若参与案例为案例行为主体，应当优先抽取为主体
### 属性
- 组织名称：组织的正式名称
- 组织性质：国有企业、上市公司、外资企业、政府机构等
- 注册地：组织注册或主要经营所在地
- 行业领域：组织所属的行业领域，如能源、化工、建筑

##  行为
### 介绍
表示案例中发生的可能违规、违法或存在合规风险的具体行为，是案例分析的核心主体
### 属性
- 行为类型：行为的类别，如行贿、受贿、挪用公款、垄断协议
- 行为描述：对行为经过的事实性描述
- 行为性质：根据规章法律、程序要求判断该行为的实际性质，如违法行为、违规行为、合法行为等
- 行为方式：行为实施的具体方式，如回扣、宴请、欺瞒等
- 涉及利益：该行为涉及到的当事人或其他主体的利益情况，如涉及的金钱或财产数额

## 罪名或违法性质
### 介绍
表示对违法或不当行为的法律定性结果。
### 属性
- 名称：罪名或违法行为名称
- 法律性质：刑事犯罪、行政违法或合规违规
- 是否单位犯罪：是否属于单位犯罪
- 构成要件摘要：认定该罪名或违法行为的核心法律要件

## 法规依据
### 介绍
表示对行为进行案例分析时依据的法律、行政法规、部门规章或司法解释中的具体条、款、项等规范性内容，一般具体到条款
### 属性
- 法规名称：法规的正式名称，不包含具体的条款，一般使用书名号《》包含，重要部分
- 条款编号：法规的具体条款编号，如第十条，第十二条第八款，重要部分
- 法规简称：法规的正式名称对应的简称
- 法规内容摘要：法规主要内容的简要概括
- 发布单位：发布该法规的行政机关或立法机关
- 公布年份：法规公布的年月日
- 实施年份：法规开始生效执行的年月日
- 时效性：法规当前状态，如“现行有效”“已废止”“已修订”
- 法规层级：法律效力层级，如法律、行政法规、司法解释
- 适用行业：法规主要适用的行业或领域
- 法规方向：法规调整的法律关系方向，如刑事责任、行政处罚

## 裁判结果
### 介绍
表示对行为进行案件分析后，最终产生的性质裁决、法律后果或处理结果。
### 属性
- 裁决分析：对案例行为进行分析的过程，是案例分析的主要内容
- 裁判内容：具体处罚措施描述或最终定性，如处罚金、不违法
- 裁判类型：刑事处罚、行政处罚或民事责任
- 是否从轻或加重：是否存在从轻、减轻或加重情节
- 裁决机关：作出裁决的法院或监管机关

## 案件启示
### 介绍
表示从案例中总结出的案例总结、合规提示与风险启示等
### 属性
- 案例总结：通过案例对案例进行分析，最终得到的总结性或事实称述性内容
- 法律适用启示：从案件中得出的法律适用方面的启示，如"专利图片必须清晰、完整地表示产品"
- 启示提示：包括防控建议、实务建议、风险提示

## 案例分析
### 介绍
对案例内容进行分析的过程，包括问题、结论、要点、分析过程等
### 属性
- 分析要点：由案例内容提出的针对案例合规情况的问题或关注点，作为案例分析的一条方向
- 行为过程：对案例分析的一条方向（或问题）的详细分析过程
- 分析编号：对案例进行分析时设置的序号
- 分析结论：针对案例分析问题的分析结论

"""
edges = """
# 关系类型
## 涉及
### 介绍
1. 某一行为中涉及到了某一主体，或主体参与到该行为中（与实施区分）
2. 表示合规案例与相关主体之间的参与关系
3. 案例分析中涉及到的案例当事人或组织
### 关系三元组
- 行为-涉及-主体
- 案例-涉及-主体
- 案例分析-涉及-主体

## 符合
### 介绍
表示案例的某行为符合法规内容
### 关系三元组
- 行为-符合-法律规章

## 违反
### 介绍
某一行为触犯、破坏了某项具体法律规章的规定。
### 关系三元组
- 行为-违反-法律规章

## 遭受
### 介绍
1. 主体依据其行为和法规遭受到具体的处罚结果或处理结果
2. 表示主体遭受了某项具体行为的侵害或损害。
### 关系三元组
- 主体-遭受-行为
- 主体-遭受-裁判结果

## 承担
### 介绍
主体依据其行为是否违法承担相应的罪名或违法性质
### 关系三元组
- 主体-承担-罪名或违法性质

## 发生
### 介绍
表示合规案例中存在或发生具体的行为
### 关系三元组
- 案例-发生-行为

## 隶属于
### 介绍
表示主体与其所属组织之间的隶属关系。
### 关系三元组
- 主体-隶属于-组织机构

## 实施
### 介绍
表示主体实施了某一行为。
### 关系三元组
- 主体-实施-行为

## 构成
### 介绍
表示某一行为在法律上构成特定罪名或违法性质。
### 关系三元组
- 行为-构成-罪名或违法性质

## 依据
### 介绍
1. 表示罪名或违法性质的法律依据。
2. 案例分析过程中涉及或依据的法律规章
### 关系三元组
- 案件分析-依据-法律规章

## 导致
### 介绍
表示合规案例中的某一行为最终导致的处罚或处理结果
### 关系三元组
- 行为-导致-裁判结果

## 形成
### 介绍
表示从合规案例或案例裁判结果中总结和提炼出的合规启示
### 关系三元组
- 案例-形成-案例启示
- 裁判结果-形成-案例启示
- 案例分析-形成-案例启示

## 引申出
### 介绍
表示对案例进行合规分析时，引申出的案件分析方向或问题
### 关系三元组
- 案例-引申出-案例分析

## 包含
### 介绍
对案例分析的一条方向（问题）进行分析时，涉及到的行为
### 关系三元组
- 案例分析-包含-行为

## 得出
### 介绍
对案例行为或问题进行详细分析后得出的对案例主体的裁判结果
### 关系三元组
- 案例分析-得出-裁判结果

"""


prompt = """
# 角色
您是一个合规案例文本分析专家，能够从案例分析记录等文本中准确提取实体、属性和关系信息，用于合规案例知识图谱。
# 任务说明
请从给定的案例分析记录文本中提取知识图谱所需的节点和关系，构建合规案例知识图谱。请严格按照下面的节点类型、属性和关系类型进行识别和提取， 并以JSON格式输出,具体过程为：
1. 根据markdown表格，获取案例名称，对应后续的案例节点，然后根据合规领域章节为案例实体添加合规领域属性
2. 对具体案例内容进行分析，通过案例描述和案例分析识别提取节点和关系
3. **重要**：请尽可能全面的抽取文本中所有符合schema的节点和关系，不要遗漏任何信息，确保文本内知识信息抽取无缺漏。
"""
schema = {
    "nodes": nodes,
    "edges": edges
}
examples = [
    {
        "text": "案例3:道达尔“埃里卡”号油轮污染案7：1999年12月12日，为法国道达尔集团公司运载燃料油的\"埃里卡\"(Erika)号油轮在狂风中断裂沉没，2万余吨燃油泄漏，造成严重污染。2008年1月16日，巴黎最高法庭作出判决:道达尔公司对 Erika 事件负有责任，罚款 37.5 万欧元，此外，道达尔公司还须与其他三名被告共同向受溢油污染的相关方支付1.92 亿欧元赔偿金。",
        "nodes": [
            {
                "name": "道达尔“埃里卡”号油轮污染案",
                "type": "案例",
                "attributes": {
                    "案例名称": "道达尔“埃里卡”号油轮污染案",
                    "案例类型": "真实案例",
                    "案例摘要": "法国道达尔集团公司的埃里卡号油轮断裂沉没导致燃油泄漏污染",
                    "发生时间": "1999年12月12日"
                }
            },
            {
                "name": "道达尔公司",
                "type": "主体",
                "attributes": {
                    "主体名称": "道达尔公司",
                    "主体身份": "被告",
                    "主体类型": "公司"
                }
            },
            {
                "name": "罚款37.5万欧元及赔偿1.92亿欧元",
                "type": "裁判结果",
                "attributes": {
                    "裁判内容": "罚款37.5万欧元，支付1.92亿欧元赔偿金",
                    "裁判类型": "行政处罚"
                }
            }
        ],
        "edges": [
            {
                "name": "",
                "type": "关系",
                "attributes": {
                    "主体": "道达尔“埃里卡”号油轮污染案",
                    "谓词": "涉及",
                    "客体": "道达尔公司"
                }
            },
            {
                "name": "",
                "type": "关系",
                "attributes": {
                    "主体": "道达尔公司",
                    "谓词": "遭受",
                    "客体": "罚款37.5万欧元及赔偿1.92亿欧元"
                }
            }
        ]
    }
]
