nodes = [
  {
    "entity": "案例",
    "description": "1. 表示合规案例库中的一个具体案例，是合规知识图谱的核心实体，用于承载事实、行为、案例分析、启示等\n2. **最重要**文本中的案例都要提取出来，请确保无遗漏，可通过\"案例X\"、markdown表格案例数据行等方式获取案例，如从\"案例1:国企境外公司高管受贿案\"获取\"国企境外公司高管受贿案\"",
    "properties": {
      "案例名称": "案例的正式标题，不包含编号、标号和非实体可拥有的符号，即不包含（案例一、序号5等）",
      "案例编号": "案例在案例库中的序号，如案例1",
      "合规领域": "案例所属的合规领域章节，包括\"反腐败反商业贿赂\"、\"反垄断反不正当竞争\"、\"经济制裁\"、\"反洗钱\"、\"安全环保\"、\"商业秘密\"、\"劳动用工\"、\"数据安全\"、\"国资监管及境外投资\"等",
      "案例类型": "案例性质，如\"真实案例\"、\"模拟案例\"",
      "发生时间": "案件主要行为发生的时间或时间区间",
      "发生国家或地区": "案件行为发生的国家或地区",
      "案例摘要": "对案件事实的高度概括性描述"
    }
  },
  {
    "entity": "案例主体",
    "description": "表示参与或涉及合规案例的当事人或组织中的自然人主体。",
    "properties": {
      "主体名称": "涉案主体的姓名或匿名标识",
      "主体类型": "个人或组织成员",
      "主体身份": "主体在案例中的角色，如被告、嫌疑人、受害者",
      "所属组织": "主体隶属或任职的组织",
      "组织性质": "若案例主体为组织，则有组织性质属性，如国有企业、上市公司、外资企业、政府机构等",
      "注册地/所在地": "自然人所在地或组织的注册地址，如\"北京市海淀区\""
    }
  },
  {
    "entity": "行为",
    "description": "表示案例中发生的可能违规、违法或存在合规风险的具体行为，是案例分析的核心主体",
    "properties": {
      "行为类型": "行为的类别，如行贿、受贿、挪用公款、垄断协议",
      "行为描述": "对行为经过的事实性描述",
      "行为性质": "根据规章法律、程序要求判断该行为的实际性质，如违法行为、违规行为、合法行为等",
      "行为方式": "行为实施的具体方式，如回扣、宴请、欺瞒等",
      "涉及利益": "该行为涉及到的当事人或其他主体的利益情况，如涉及的金钱或财产数额"
    }
  },
  {
    "entity": "罪名或违法性质",
    "description": "表示对违法或不当行为的法律定性结果。",
    "properties": {
      "名称": "罪名或违法行为名称",
      "法律性质": "刑事犯罪、行政违法或合规违规",
      "是否单位犯罪": "是否属于单位犯罪",
      "构成要件摘要": "认定该罪名或违法行为的核心法律要件"
    }
  },
  {
    "entity": "法规条款依据",
    "description": "表示对行为进行案例分析时依据的法律、行政法规、部门规章或司法解释中的具体条、款、项等，获取实例时应选取 完整名称+条款，如《中华人民共和国刑法》第十条",
    "properties": {
      "法规名称": "法规的正式名称(一般位于书名号之中)，不包含具体的条款，不包含书名号\"《》\"，不包含修订等注释信息（如（2010年修订）），重要部分",
      "条款编号": "法规的具体条款编号，如第十条，第十二条第八款，重要部分",
      "法规简称": "法规的正式名称对应的简称",
      "法规条款内容": "法规条款的具体内容",
      "法规条款摘要": "法规条款简要概括",
      "发布单位": "发布该法规的行政机关或立法机关",
      "公布年份": "法规公布的年月日",
      "实施年份": "法规开始生效执行的年月日",
      "时效性": "法规当前状态，如\"现行有效\"\"已废止\"\"已修订\"",
      "法规层级": "法律效力层级，如法律、行政法规、司法解释",
      "适用行业": "法规主要适用的行业或领域",
      "法规方向": "法规调整的法律关系方向，如刑事责任、行政处罚"
    }
  },
  {
    "entity": "裁判结果",
    "description": "表示对行为进行案件分析后，最终产生的性质裁决、法律后果或处理结果。",
    "properties": {
      "裁决分析": "对案例行为进行分析的过程，是案例分析的主要内容",
      "裁判内容": "具体处罚措施描述或最终定性，如处罚金、不违法",
      "裁判类型": "刑事处罚、行政处罚或民事责任",
      "是否从轻或加重": "是否存在从轻、减轻或加重情节",
      "裁决机关": "作出裁决的法院或监管机关"
    }
  },
  {
    "entity": "案件启示",
    "description": "表示从案例中总结出的案例总结、合规提示与风险启示等",
    "properties": {
      "案例总结": "通过案例对案例进行分析，最终得到的总结性或事实称述性内容",
      "法律适用启示": "从案件中得出的法律适用方面的启示，如\"专利图片必须清晰、完整地表示产品\"",
      "启示提示": "包括防控建议、实务建议、风险提示"
    }
  },
  {
    "entity": "案例分析",
    "description": "对案例内容进行分析的过程，包括问题、结论、要点、分析过程等",
    "properties": {
      "分析要点": "由案例内容提出的针对案例合规情况的问题或关注点，作为案例分析的一条方向",
      "行为过程": "对案例分析的一条方向（或问题）的详细分析过程",
      "分析编号": "对案例进行分析时设置的序号",
      "分析结论": "针对案例分析问题的分析结论"
    }
  }
]

edges = [
  {
    "relation": "涉及",
    "source_name": "行为",
    "target_name": "案例主体",
    "description": "某一行为中涉及到了某一主体，或主体参与到该行为中（与实施区分）"
  },
  {
    "relation": "涉及",
    "source_name": "案例",
    "target_name": "案例主体",
    "description": "表示合规案例与相关案例主体之间的参与关系"
  },
  {
    "relation": "涉及",
    "source_name": "案例分析",
    "target_name": "案例主体",
    "description": "案例分析中涉及到的案例当事人或组织"
  },
  {
    "relation": "符合",
    "source_name": "行为",
    "target_name": "法规条款依据",
    "description": "表示案例的某行为符合法规内容"
  },
  {
    "relation": "违反",
    "source_name": "行为",
    "target_name": "法规条款依据",
    "description": "某一行为触犯、破坏了某项具体法规条款的规定。"
  },
  {
    "relation": "遭受",
    "source_name": "案例主体",
    "target_name": "行为",
    "description": "案例主体遭受了某项具体行为的侵害或损害。"
  },
  {
    "relation": "遭受",
    "source_name": "案例主体",
    "target_name": "裁判结果",
    "description": "案例主体依据其行为和法规遭受到具体的处罚结果或处理结果"
  },
  {
    "relation": "承担",
    "source_name": "案例主体",
    "target_name": "罪名或违法性质",
    "description": "案例主体依据其行为是否违法承担相应的罪名或违法性质"
  },
  {
    "relation": "发生",
    "source_name": "案例",
    "target_name": "行为",
    "description": "表示合规案例中存在或发生具体的行为"
  },
  {
    "relation": "隶属于",
    "source_name": "案例主体",
    "target_name": "案例主体",
    "description": "若两个案件主体一个为自然人，一个为组织，则可以存在自然人隶属于组织的关系，如王某隶属于A公司\n注意：隶属于的关系双方是两个不同的实体"
  },
  {
    "relation": "实施",
    "source_name": "案例主体",
    "target_name": "行为",
    "description": "表示案例主体实施了某一行为。"
  },
  {
    "relation": "构成",
    "source_name": "行为",
    "target_name": "罪名或违法性质",
    "description": "表示某一行为在法律上构成特定罪名或违法性质。"
  },
  {
    "relation": "依据",
    "source_name": "案例分析",
    "target_name": "法规条款依据",
    "description": "案例分析过程中涉及或依据的法规条款"
  },
  {
    "relation": "导致",
    "source_name": "行为",
    "target_name": "裁判结果",
    "description": "表示合规案例中的某一行为最终导致的处罚或处理结果"
  },
  {
    "relation": "形成",
    "source_name": "案例",
    "target_name": "案例启示",
    "description": "表示从合规案例中总结和提炼出的合规启示"
  },
  {
    "relation": "形成",
    "source_name": "裁判结果",
    "target_name": "案例启示",
    "description": "表示从案例裁判结果中总结和提炼出的合规启示"
  },
  {
    "relation": "形成",
    "source_name": "案例分析",
    "target_name": "案例启示",
    "description": "表示从案例分析中总结和提炼出的合规启示"
  },
  {
    "relation": "引申出",
    "source_name": "案例",
    "target_name": "案例分析",
    "description": "表示对案例进行合规分析时，引申出的案件分析方向或问题"
  },
  {
    "relation": "包含",
    "source_name": "案例分析",
    "target_name": "行为",
    "description": "对案例分析的一条方向（问题）进行分析时，涉及到的行为"
  },
  {
    "relation": "得出",
    "source_name": "案例分析",
    "target_name": "裁判结果",
    "description": "对案例行为或问题进行详细分析后得出的对案例主体的裁判结果"
  }
]

prompt = """
# 角色
您是一个合规案例文本分析专家，能够从案例分析记录等文本中准确提取实体、属性和关系信息，用于合规案例知识图谱。
# 任务说明
请从给定的案例分析记录文本中提取知识图谱所需的节点和关系，构建合规案例知识图谱。请严格按照下面的节点类型、属性和关系类型进行识别和提取， 并以JSON格式输出,具体过程为：
1. 根据markdown表格，获取案例名称，对应后续的案例节点，然后根据合规领域章节为案例实体添加合规领域属性，一般情况下，每个案例编号对应一个案例
2. 对具体案例内容进行分析，通过案例描述和案例分析识别提取节点和关系
3. ⚠️ 重要：请尽可能全面的抽取文本中所有符合schema的节点和关系，不要遗漏任何信息，确保文本内知识信息抽取无缺漏。
"""
schema = {
    "nodes": str(nodes),
    "edges": str(edges)
}
examples = [
    {
        "text": "案例3:道达尔“埃里卡”号油轮污染案7 \n1999年12月12日，为法国道达尔集团公司运载燃料油的\"埃里卡\"(Erika)号油轮在狂风中断裂沉没，2万余吨燃油泄漏，造成严重污染。2008年1月16日，巴黎最高法庭作出判决:道达尔公司对 Erika 事件负有责任，罚款 37.5 万欧元，此外，道达尔公司还须与其他三名被告共同向受溢油污染的相关方支付1.92 亿欧元赔偿金。",
        "nodes": [
            {
                "name": "道达尔“埃里卡”号油轮污染案",
                "type": "案例",
                "attributes": {
                    "案例名称": "道达尔“埃里卡”号油轮污染案",
                    "案例编号": "案例3",
                    "案例摘要": "法国道达尔集团公司的埃里卡号油轮断裂沉没导致燃油泄漏污染",
                    "发生时间": "1999年12月12日"
                }
            },
            {
                "name": "道达尔公司",
                "type": "案例主体",
                "attributes": {
                    "主体名称": "道达尔公司",
                    "主体身份": "被告",
                    "主体类型": "公司"
                }
            },
            {
                "name": "罚款37.5万欧元及赔偿1.92亿欧元",
                "type": "裁判结果",
                "attributes": {
                    "裁判内容": "罚款37.5万欧元，支付1.92亿欧元赔偿金",
                    "裁判类型": "行政处罚"
                }
            }
        ],
        "edges": [
            {
                "name": "",
                "type": "关系",
                "attributes": {
                    "主体": "道达尔“埃里卡”号油轮污染案",
                    "谓词": "涉及",
                    "客体": "道达尔公司"
                }
            },
            {
                "name": "",
                "type": "关系",
                "attributes": {
                    "主体": "道达尔公司",
                    "谓词": "遭受",
                    "客体": "罚款37.5万欧元及赔偿1.92亿欧元"
                }
            }
        ]
    }
]
